<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Java - CodeYard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="game-levels.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg fixed-top game-nav">
        <div class="container">
            <a class="navbar-brand" href="/">
                <span class="logo-text">üéÆ CodeYard</span>
            </a>
            <a href="/" class="btn-back">‚Üê Back to Home</a>
        </div>
    </nav>

    <div class="game-container">
        <!-- Level Selector Sidebar -->
        <div class="level-sidebar">
            <h3>RPG Game</h3>
            <p class="subtitle">Master Java</p>
            <div class="levels-list" id="levelsList">
                <!-- Levels will be populated by JavaScript -->
            </div>
            <div style="margin-top: 30px; padding: 20px; background: rgba(255,0,127,0.1); border-radius: 10px;">
                <h5 style="color: #ff007f; margin-bottom: 10px;">üéÆ Complete RPG Game</h5>
                <p style="color: rgba(255,255,255,0.8); font-size: 0.9rem; margin-bottom: 10px;">
                    A complete RPG game is available in the codebase!
                </p>
                <a href="#rpg-game" style="color: #00ffff; text-decoration: none;">View RPG Game ‚Üí</a>
            </div>
        </div>

        <!-- Main Game Area -->
        <div class="game-main">
            <!-- Level Header -->
            <div class="level-header">
                <div class="level-info">
                    <h1 id="levelTitle">Level 1: Variables & Data Types</h1>
                    <p id="levelDescription">Learn the basics of Java programming</p>
                </div>
                <div class="level-progress">
                    <div class="progress-bar-large">
                        <div class="progress-fill-large" id="overallProgress"></div>
                    </div>
                    <span class="progress-text">Overall Progress: <span id="progressPercent">0%</span></span>
                </div>
            </div>

            <!-- Game Canvas Area -->
            <div class="game-area">
                <div class="game-view">
                    <div class="java-code-preview">
                        <h4 style="color: #ff007f; margin-bottom: 20px;">üìù Java Code Example</h4>
                        <div class="code-display" id="codeDisplay">
                            <pre><code id="codeExample">// Java code will be displayed here</code></pre>
                        </div>
                        <div class="game-controls">
                            <button id="runCode" class="btn-run" onclick="showJavaInfo()">üìñ View Instructions</button>
                            <button id="downloadCode" class="btn-reset" onclick="downloadJavaCode()">üíæ Download Code</button>
                        </div>
                    </div>
                </div>

                <!-- Code Editor -->
                <div class="code-editor-container">
                    <div class="editor-header">
                        <span>üìù Your Code</span>
                        <span class="concept-badge" id="conceptBadge">Variables</span>
                    </div>
                    <textarea id="codeEditor" spellcheck="false" placeholder="// Write your Java code here
// Copy this code to your IDE to run it
// Follow the instructions to complete this level"></textarea>
                    <div class="editor-footer">
                        <button id="checkCode" class="btn-check" onclick="checkJavaCode()">‚úì Check Solution</button>
                        <div id="codeStatus" class="code-status"></div>
                    </div>
                </div>
            </div>

            <!-- Instructions Panel -->
            <div class="instructions-panel">
                <h4>üìö Instructions</h4>
                <div id="instructions" class="instructions-content">
                    <!-- Instructions will be populated by JavaScript -->
                </div>
                <div id="hintContent" class="hint-content" style="display: none;">
                    <h5>üí° Hint</h5>
                    <p id="hintText"></p>
                </div>
            </div>

            <!-- RPG Game Info Section -->
            <div id="rpg-game" class="instructions-panel" style="margin-top: 20px; background: rgba(0,255,255,0.1); border: 2px solid rgba(0,255,255,0.3);">
                <h4 style="color: #00ffff;">üéÆ Complete Java RPG Game</h4>
                <div class="instructions-content">
                    <p><strong>A complete RPG game is included in this project!</strong></p>
                    <h5 style="color: #ff007f; margin-top: 20px;">Game Features:</h5>
                    <ul>
                        <li><strong>Player Class</strong> - Health, level, experience, gold, stats</li>
                        <li><strong>Enemy System</strong> - Multiple enemy types with different levels</li>
                        <li><strong>Combat System</strong> - Turn-based combat with attack/defense</li>
                        <li><strong>Item System</strong> - Weapons, armor, potions, gold</li>
                        <li><strong>Game Map</strong> - Procedurally generated map with walls and obstacles</li>
                        <li><strong>Inventory System</strong> - Collect and use items</li>
                        <li><strong>Level Progression</strong> - Gain experience and level up</li>
                    </ul>
                    
                    <h5 style="color: #ff007f; margin-top: 20px;">Source Files:</h5>
                    <ul>
                        <li><code>src/main/java/com/codeyard/game/rpg/Player.java</code></li>
                        <li><code>src/main/java/com/codeyard/game/rpg/Enemy.java</code></li>
                        <li><code>src/main/java/com/codeyard/game/rpg/Item.java</code></li>
                        <li><code>src/main/java/com/codeyard/game/rpg/GameMap.java</code></li>
                        <li><code>src/main/java/com/codeyard/game/rpg/RPGGame.java</code></li>
                        <li><code>src/main/java/com/codeyard/game/RPGGameLauncher.java</code></li>
                    </ul>
                    
                    <h5 style="color: #ff007f; margin-top: 20px;">How to Run the RPG Game:</h5>
                    <ol>
                        <li>Open the project in your IDE (IntelliJ IDEA, Eclipse, or VS Code)</li>
                        <li>Navigate to <code>RPGGameLauncher.java</code></li>
                        <li>Run the main method</li>
                        <li>Follow the on-screen instructions to play!</li>
                    </ol>
                    
                    <h5 style="color: #ff007f; margin-top: 20px;">Game Commands:</h5>
                    <ul>
                        <li><strong>w/a/s/d</strong> - Move (up/left/down/right)</li>
                        <li><strong>stats</strong> - View your stats</li>
                        <li><strong>map</strong> - View the map</li>
                        <li><strong>inventory</strong> - View and use items</li>
                        <li><strong>fight</strong> - Fight nearby enemies</li>
                        <li><strong>explore</strong> - Look for items</li>
                        <li><strong>quit</strong> - Exit game</li>
                    </ul>
                </div>
            </div>

            <!-- Level Navigation -->
            <div class="level-navigation">
                <button id="prevLevel" class="btn-nav" onclick="prevJavaLevel()">‚Üê Previous Level</button>
                <button id="nextLevel" class="btn-nav" onclick="nextJavaLevel()">Next Level ‚Üí</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="java-levels.js"></script>
    <script>
        function showJavaInfo() {
            alert('Java code cannot run in the browser. Copy the code to your IDE (IntelliJ IDEA, Eclipse, or VS Code) and run it there!');
        }
        
        function downloadJavaCode() {
            const code = document.getElementById('codeEditor').value;
            const blob = new Blob([code], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'JavaCode.java';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function checkJavaCode() {
            const code = document.getElementById('codeEditor').value;
            const level = javaLevels[currentJavaLevel];
            const status = document.getElementById('codeStatus');
            
            if (level.solution(code)) {
                if (!completedJavaLevels.includes(level.id)) {
                    completedJavaLevels.push(level.id);
                    localStorage.setItem('completedJavaLevels', JSON.stringify(completedJavaLevels));
                }
                status.textContent = '‚úì Level Complete! Well done!';
                status.className = 'code-status success';
                updateJavaProgress();
                renderJavaLevelsList();
            } else {
                status.textContent = '‚úó Not quite right. Check the instructions!';
                status.className = 'code-status error';
            }
        }
        
        function prevJavaLevel() {
            if (currentJavaLevel > 0) {
                loadJavaLevel(currentJavaLevel - 1);
            }
        }
        
        function nextJavaLevel() {
            if (currentJavaLevel < javaLevels.length - 1) {
                loadJavaLevel(currentJavaLevel + 1);
            }
        }
        
        // Update loadJavaLevel to show code examples
        const originalLoadJavaLevel = loadJavaLevel;
        loadJavaLevel = function(index) {
            originalLoadJavaLevel(index);
            const level = javaLevels[index];
            const codeExample = document.getElementById('codeExample');
            if (codeExample) {
                codeExample.textContent = level.starterCode;
            }
        };
    </script>
</body>
</html>
